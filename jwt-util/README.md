# Advantages-and-Disadvantages-of-the-JWT

发布日期：2024年3月25日

主题：JWT 是用于验证无状态应用程序的最常用令牌。但它也有一些限制，必须考虑到安全限制。

首先，让我们看看什么是真正的 JWT。

## JWT 的结构

JWT 是一种 JSON Web Token，它是一个经过签名的 JSON 文档，用于 Web 通信。

这里最重要的词是签名。

在加密世界中，主要有两类：对称加密和非对称加密。

当以非对称方式加密一个值时，我们会将该值转换为另一个值。但反过来就不可能了。

当以对称方式加密一个值时，我们会将这个值转换成另一个值。但我们可以将其恢复到原来的值。这是一条双向的道路。

JWT 是一个由三部分组成的令牌：第一部分包含用于加密 JSON 文档的对称算法，第二部分是加密的 JSON 文档，最后一部分是签名。

由于第二部分采用对称算法加密，而所用算法的信息存在于第一部分中，因此很容易泄露原始 JSON 文档。

这让我想到了 JWT 的第一个缺点。

## 缺点

我无法存储敏感信息，因为任何人都可以解密并读取原始 JSON 文档。

敏感信息是什么意思？我必须避免使用密码、银行账户之类的信息。

我还能存储什么呢？ID、角色、名字和姓氏。与用户相关的信息，对前端可见且有用。

那么，有什么优势呢？

## 优势

我有一个压缩的 JSON 对象，它是一个字符串。

默认情况下，JWT 使用对称算法（HS256）来加密 JSON 对象。但我可以选择非对称算法（例如 RS256），并使用公钥和私钥。

我有一个签名部分，用于验证 JWT 的创建者。只有拥有创建签名所需的密钥的服务器才能创建有效的 JWT。这使得后端信任具有有效签名部分的 JWT。

令牌比 JSON 对象小。这就是为什么我可以将 JWT 发送到 HTTP 标头中。

JWT 是身份验证行业的一个标准，很多身份验证系统都在使用它。

我可以使用[jwt.io](http://jwt.io/)生成和调试它们。

我可以添加保留值作为有效日期，这使得 JWT 在给定日期之后无效。

然而，由于 JWT 只发送给前端一次，后端就失去了对它的控制权。如果后端需要让所有生成的 JWT 失效，这是不可能的。

事实上，这并不容易，但并非不可能。查看这篇[文章](https://sergiolema.dev/2023/04/03/3-ways-to-invalidate-a-jwt-token-in-the-backend-side/)了解更多信息。

## 结论

| 缺点         | 优势                     |
| :----------- | :----------------------- |
| 轻松解密     | 包含一个紧凑的 JSON 对象 |
| 难以使其无效 | 这是一个标准             |
|              | 我可以轻松生成和调试     |

有很多库可以创建和读取 JWT，无论是在后端还是前端。

它结构紧凑，通用性强。

但它是在互联网上共享的，所以我必须小心存储在里面的内容。 